<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"wangng.com",root:"/",scheme:"Pisces",version:"7.7.2",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="数组数组（array）是一种数据格式，能够存储多个同类型的值。每个值都存储在一个独立的数组元素中，计算机在内存中依次存储数组的各个元素。要创建数组，可使用声明语句。数组声明应指出以下三点："><meta property="og:type" content="article"><meta property="og:title" content="C++之数组"><meta property="og:url" content="https://wangng.com/articles/8f9a18b2.html/index.html"><meta property="og:site_name" content="jackcywang&#39;s blog"><meta property="og:description" content="数组数组（array）是一种数据格式，能够存储多个同类型的值。每个值都存储在一个独立的数组元素中，计算机在内存中依次存储数组的各个元素。要创建数组，可使用声明语句。数组声明应指出以下三点："><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.wangng.com/C++/C++%E4%B9%8B%E6%95%B0%E7%BB%84/image1.png"><meta property="article:published_time" content="2019-06-30T02:35:37.000Z"><meta property="article:modified_time" content="2020-04-23T12:20:33.292Z"><meta property="article:author" content="jackcywang"><meta property="article:tag" content="C++"><meta property="article:tag" content="数组"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.wangng.com/C++/C++%E4%B9%8B%E6%95%B0%E7%BB%84/image1.png"><link rel="canonical" href="https://wangng.com/articles/8f9a18b2.html/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>C++之数组 | jackcywang's blog</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8ce866754ae6c95a7238894d36ad3ab0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div> <a href="https://github.com/jackcywang" target="_blank" rel="noopener" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64ceaa;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">jackcywang's blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">梦想与现实只在一念之间</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li></ul></nav></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wangng.com/articles/8f9a18b2.html/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="jackcywang"><meta itemprop="description" content="不经一番彻骨寒,怎得梅花扑鼻香"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="jackcywang's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> C++之数组</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-06-30 10:35:37" itemprop="dateCreated datePublished" datetime="2019-06-30T10:35:37+08:00">2019-06-30</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/articles/8f9a18b2.html/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/articles/8f9a18b2.html/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>4.7k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>数组（array）是一种数据格式，能够存储多个同类型的值。每个值都存储在一个独立的数组元素中，计算机在内存中依次存储数组的各个元素。要创建数组，可使用声明语句。数组声明应指出以下三点：</p><a id="more"></a><ul><li>存储在每个元素中的值的类型；</li><li>数组名</li><li>数组中的元素数</li></ul><p>在C++中，可以通过修改简单变量的声明，添加中括号（其中包含元素数目）来完成数组声明。例如，下面的声明创建一个名为 months的数组，该数组有12个元素，每个元素都可以存储一个 short类型:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">short months[<span class="number">12</span>]</span><br></pre></td></tr></table></figure><p>声名数组的通用格式如下</p><p>​<em>typeName arrayName[arraySize];</em></p><p>​表达式 arraySize指定元素数目，它必须是整型常数（如10）或const值，也可以是常量表达式（如8·<br>sizeof（int），即其中所有的值在编译时都是已知的。具体地说， arraySize不能是变量，变量的值是在程序时设置的。</p><p>​数组的很多用途都是基于这样一个事实：可以单独访问数组元素，方法是使用下标或索引来对元素进行编号。C++数组从0开始编号。C++使用带索引的方括号表示法来指定数组元素，例如， months[0]是 months数组的第一个元素， months[11]是最后一个元素。注意，最后一个元素的索引比数组长度小1（参见图1）。因此，数组声明能够使用个声明创建大量的变量，然后便可以用索引来标识和访问各个元素</p><p><img src="http://cdn.wangng.com/C++/C++之数组/image1.png" alt></p><h4 id="数组的初始化规则"><a href="#数组的初始化规则" class="headerlink" title="数组的初始化规则"></a>数组的初始化规则</h4><p>只有定义数组时才能使用初始化，此后就不能使用了，也不能将一个数组赋给另一个数组：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> cards[<span class="number">4</span>] = &#123;<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>&#125;;    <span class="comment">//okay</span></span><br><span class="line"><span class="keyword">int</span> hand[<span class="number">4</span>];                  <span class="comment">//okay</span></span><br><span class="line">hand[<span class="number">4</span>] = &#123;<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;          <span class="comment">//not okay</span></span><br><span class="line">hand = cards;                 <span class="comment">// not okay</span></span><br></pre></td></tr></table></figure><p>也可以使用下标分别给数组中的元素赋值。</p><p>初始化数组时，提供的值可以少于数组的元素数目。例如，下面的语句只初始化hotelTips的前两个元素：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> hotelTips[<span class="number">5</span>] = &#123;<span class="number">5.0</span>,<span class="number">2.5</span>&#125;;</span><br></pre></td></tr></table></figure><p>如果只对数组的一部分进行初始化，则编译器将把其他元素设置为0.因此，将数组中所有的元素都初始化为0非常简单—只要显式地将第一个元素初始化为0，然后让编译器将其他元素都初始化为0;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> totals[<span class="number">500</span>] = &#123;<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure><p>如果初始化为{1} 而不是{0}，则第一个元素设置为1，其他元素被设置为0。</p><p>如果初始化数组时方括号内([])为空，C++编译器将计算元素个数，例如，对于下面的声名：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">short things[] &#x3D; &#123;1, 5, 3, 8&#125;</span><br></pre></td></tr></table></figure><p>编译器将使things数组包含4个元素。</p><h4 id="C-11初始化方法"><a href="#C-11初始化方法" class="headerlink" title="C++11初始化方法"></a>C++11初始化方法</h4><p>C++使用大括号的初始化(列表初始化)作为一种通用初始化方法，可用于所有类型。数组以前就可使用列表初始化，但C++中列表初始化新增了一些功能。</p><p>1.初始化数组时，可以省略等号(=)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> earnings[<span class="number">4</span>] &#123;<span class="number">1.2e4</span>,<span class="number">1.6e4</span>,<span class="number">1.1e4</span>,<span class="number">1.7e4</span>&#125;;</span><br></pre></td></tr></table></figure><p>2.可在大括号内不包含任何东西，这将把所有元素都设置为零：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> counts[<span class="number">10</span>]=&#123;&#125;； <span class="comment">//all elements set to 0</span></span><br><span class="line"><span class="keyword">float</span> balances[<span class="number">100</span>] &#123;&#125;      <span class="comment">//all elements set to 0</span></span><br></pre></td></tr></table></figure><p>3.列表初始化禁止缩窄转换</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> plifs[] = &#123;<span class="number">25</span>,<span class="number">92</span>,<span class="number">3.0</span>&#125;   <span class="comment">// not allowed</span></span><br><span class="line"><span class="keyword">char</span> slifs[<span class="number">4</span>] &#123;<span class="string">'h'</span>,<span class="string">'i'</span>,<span class="number">1122011</span>,<span class="string">'\0'</span>&#125; <span class="comment">// not allowed</span></span><br><span class="line"><span class="keyword">char</span> tlifs[<span class="number">4</span>] &#123;<span class="string">'h'</span>,<span class="string">'i'</span>,<span class="number">112</span>,<span class="string">'\0'</span>&#125;   <span class="comment">//allowed</span></span><br></pre></td></tr></table></figure><p>在上述代码中，第一条语句不能通过编译，因为将浮点数转换为整型是缩窄操作，即使浮点数的小数点后面为零。第二条语句也不能通过编译，因为1122011超出了char变量的取值范围（这里假设char变量的长度为8位）。第三条语句可通过编译，因为虽然112是一个int值，但它在char变量的取值范围内。</p><h3 id="数组的替代品"><a href="#数组的替代品" class="headerlink" title="数组的替代品"></a>数组的替代品</h3><p>模板类vector和array是数组的替代品；这些替代品对于数组的创建和使用更加灵活简便。</p><h4 id="模板类vector"><a href="#模板类vector" class="headerlink" title="模板类vector"></a>模板类vector</h4><p>模板类 vector类似于 string类，也是一种动态数组。可以在运行阶段设置 vector对象的长度，可在末尾附加新数据，还可在中间插入新数据。基本上，它是使用new创建动态数组的替代品。实际上， vector类确实使用new和 delete来管理内存，但这种工作是自动完成的.</p><p>这里不深入探讨模板类意味着什么，而只介绍一些基本的实用知识。首先，要使用 vector对象，必须包含头文件 vector。其次， vector包含在名称空间std中，因此可使用 using编译指令、 using声明或std:vector e第三，模板使用不同的语法来指出它存储的数据类型。第四， vector类使用不同的语法来指定元素数。下面是一些示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line">...</span><br><span class="line">usinga <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vi;   <span class="comment">//创建一个长度为零的int型数组</span></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">vd</span><span class="params">(n)</span></span>;  <span class="comment">//创建一个大小为n的double型数组</span></span><br></pre></td></tr></table></figure><br>其中，vi是一个 vector<int>对象，vd是一个 vector<double>对象。由于 vector对象在插入或添加值时自动调整长度，因此可以将vi的初始长度设置为零。但要调整长度，需要使用vector包中的各种方法。</double></int><p></p><p>一般而言，下面的声明创建一个名为vt的vector对象，它可存储n_elem个类型为type_Name的元素：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;typeName&gt; <span class="title">vt</span><span class="params">(n_elem)</span></span>;</span><br></pre></td></tr></table></figure><br>其中参数n_elem可以是整型常量，也可以是整型变量。<p></p><h4 id="模板类array-C-11"><a href="#模板类array-C-11" class="headerlink" title="模板类array(C++11)"></a>模板类array(C++11)</h4><p>vector类的功能比数组强大，但付出的代价是效率稍低。如果需要的是长度固定的数组，使用数组是更佳的选择，但代价是不那么方便和安全。有鉴于此，C++11新增了模板类aray，它也位于名称空间std中。与数组一样，aray对象的长度也是固定的，也使用栈（静态内存分配），而不是自由存储区，因此其效率与数组相同，但更方便，更安全。要创建aray对象，需要包含头文件array。array对象的创建语法与vector稍有不同：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;array&gt;</span></span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">array</span>&lt;<span class="keyword">int</span>, 5&gt; ai;   <span class="comment">//创建一个大小为5的array对象</span></span><br><span class="line"><span class="built_in">array</span>&lt;<span class="keyword">double</span>, 4&gt; ad = &#123;<span class="number">1.2</span>, <span class="number">2.1</span>, <span class="number">3.43</span>, <span class="number">4.3</span>&#125;;</span><br><span class="line"></span><br><span class="line">推而广之，下面的声名创建一个名为arr的<span class="built_in">array</span>的对象，它包含n_elem个类型为typeName的元素：</span><br><span class="line">```C++</span><br><span class="line"><span class="built_in">array</span>&lt;typeName, n_elem&gt; arr;</span><br></pre></td></tr></table></figure><p></p><p>与创建veto对象不同的是，n_elem不能是变量,在C++11中，可将列表初始化用于vector和array对象，但在C++98中，不能对vector对象这样做.</p><h4 id="比较数组、vector对象和array对象"><a href="#比较数组、vector对象和array对象" class="headerlink" title="比较数组、vector对象和array对象"></a>比较数组、vector对象和array对象</h4><p>要了解数组、 vector对象和aray对象的相似和不同之处，最简单的方式可能是看一个使用它们的简单示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> iostream&gt;</span></span><br><span class="line">include &lt;<span class="built_in">vector</span>&gt; <span class="comment">//STL C++98</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;array&gt; //C++11</span></span></span><br><span class="line"><span class="keyword">int</span> main（）</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>；</span><br><span class="line">    <span class="comment">//C, original C++</span></span><br><span class="line">    <span class="keyword">double</span> a1[<span class="number">4</span>]=&#123;<span class="number">1.2</span>,<span class="number">2.4</span>,<span class="number">3.6</span>,<span class="number">4</span>,<span class="number">8</span>&#125;;</span><br><span class="line">    <span class="comment">//C++98sTL </span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">a2</span><span class="params">(<span class="number">4</span>)</span></span>; <span class="comment">// create vector with 4 element</span></span><br><span class="line">    <span class="comment">// no simple way to initialize in C98</span></span><br><span class="line">    a2[<span class="number">0</span>]=<span class="number">1.0</span>/<span class="number">3.0</span>; </span><br><span class="line">    a2[<span class="number">1</span>]=<span class="number">1.0</span>/<span class="number">5.0</span>; </span><br><span class="line">    a2[<span class="number">2</span>]=<span class="number">1.0</span>/<span class="number">7.0</span>;</span><br><span class="line">    a2[<span class="number">3</span>]=<span class="number">1.0</span>/<span class="number">9.0</span>;</span><br><span class="line">    <span class="comment">// C++11-- create and initialize array object       </span></span><br><span class="line">    <span class="built_in">array</span>&lt;<span class="keyword">double</span>，4&gt; a3 = &#123;<span class="number">3.14</span>,<span class="number">2.72</span>,<span class="number">1.62</span>,<span class="number">1</span>,<span class="number">41</span>&#125;;</span><br><span class="line">    <span class="built_in">array</span>&lt;<span class="keyword">double</span>, 4&gt; a4;</span><br><span class="line">    a4=a3；  <span class="comment">//valid for array objects of same size</span></span><br><span class="line">    <span class="comment">// use array notation </span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"a1[2]："</span>&lt;&lt;a1[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>&lt;&lt;&amp;a1[<span class="number">2</span>]&lt;&lt;end1;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"a2[2]："</span>&lt;&lt;a2[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>&lt;&lt;&amp;a2[<span class="number">2l</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"a3[2]："</span>&lt;&lt;a[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>&lt;&lt;&amp;a3[<span class="number">2</span>]&lt;&lt;<span class="built_in">endl</span>;<span class="built_in">cout</span>&lt;&lt;<span class="string">"a4[2]："</span>&lt;&lt;a4[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>&lt;&lt;&amp;a4[<span class="number">2</span>]&lt;end1</span><br><span class="line">    <span class="comment">// misdeed </span></span><br><span class="line">    a1[<span class="number">-2</span>]=<span class="number">20.2</span>; </span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"a1[-2]："</span>&lt;&lt;a1[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>&lt;&amp;a1[<span class="number">-2</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"a3[2]："</span>&lt;&lt;a3[<span class="number">2l</span>&lt;&lt;<span class="string">"at"</span>&lt;&amp;a3[<span class="number">2</span>]&lt;&lt;<span class="built_in">endl</span>;<span class="built_in">cout</span>&lt;&lt;<span class="string">"a4[2]："</span>&lt;&lt;a4[<span class="number">2</span>]&lt;&lt;<span class="string">"at"</span>c&amp;a4[<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    ruturn <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//程序输出</span></span><br><span class="line">a1[<span class="number">2</span>]：<span class="number">3</span>,<span class="number">6</span> at <span class="number">0x28cce8</span></span><br><span class="line">a2[<span class="number">2</span>]：<span class="number">0.142857</span> at <span class="number">0xca0328</span></span><br><span class="line">a3[<span class="number">2</span>]：<span class="number">1.62</span> at <span class="number">0x28ccc8</span></span><br><span class="line">a4[<span class="number">2</span>]：<span class="number">1.62</span> at <span class="number">0x28cca8</span></span><br><span class="line">a1[<span class="number">-2</span>]：<span class="number">20.2</span> at <span class="number">0x28ccc8</span></span><br><span class="line">a3[<span class="number">2</span>]：<span class="number">20.2</span> at <span class="number">0x2BcccB</span> </span><br><span class="line">a4[<span class="number">2</span>]：<span class="number">1.62</span> at <span class="number">0x28ccaB</span></span><br></pre></td></tr></table></figure><p></p><p>注意到无论是数组、 vector对象还是aray对象，都可使用标准数组表示法来访问各个元素。其次，从地址可知，aray对象和数组存储在相同的内存区域（即栈）中，而 vector对象存储在另一个区域（自由存储区或堆）中。第三，注意到可以将一个array对象赋给另一个aray对象：而对于数组，必须逐元素复制数据。</p><p>下面有一行代码需要特别注意：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a1[-2] &#x3D; 20.2;</span><br></pre></td></tr></table></figure><br>这个索引将被转换为如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*[a1-2] &#x3D; 20.2;</span><br></pre></td></tr></table></figure><br>其含义如下：找到a1指向的地方，向前移两个 double元素，并将20.2存储到目的地。也就是说将信息存储到数组的外面。与C语言一样，C++也不检查这种超界错误。在这个示例中，这个位置位于aray对象a3中。其他编译器可能将20.2放在a4中，甚至做出更糟糕的选择。这表明数组的行为是不安全的。<p></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> jackcywang</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://wangng.com/articles/8f9a18b2.html/" title="C++之数组">https://wangng.com/articles/8f9a18b2.html/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a><a href="/tags/%E6%95%B0%E7%BB%84/" rel="tag"><i class="fa fa-tag"></i> 数组</a></div><div class="post-nav"><div class="post-nav-item"><a href="/articles/8c764809.html/" rel="prev" title="目标检测之SSD解读"><i class="fa fa-chevron-left"></i> 目标检测之SSD解读</a></div><div class="post-nav-item"> <a href="/articles/b186c0b4.html/" rel="next" title="C++之字符串">C++之字符串<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="tabs tabs-comment"><ul class="nav-tabs"><li class="tab"><a href="#comment-gitalk">gitalk</a></li><li class="tab"><a href="#comment-valine">valine</a></li></ul><div class="tab-content"><div class="tab-pane gitalk" id="comment-gitalk"><div class="comments" id="gitalk-container"></div></div><div class="tab-pane valine" id="comment-valine"><div class="comments" id="valine-comments"></div></div></div></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">1.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数组的初始化规则"><span class="nav-number">1.1.</span> <span class="nav-text">数组的初始化规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#C-11初始化方法"><span class="nav-number">1.2.</span> <span class="nav-text">C++11初始化方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的替代品"><span class="nav-number">2.</span> <span class="nav-text">数组的替代品</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#模板类vector"><span class="nav-number">2.1.</span> <span class="nav-text">模板类vector</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#模板类array-C-11"><span class="nav-number">2.2.</span> <span class="nav-text">模板类array(C++11)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#比较数组、vector对象和array对象"><span class="nav-number">2.3.</span> <span class="nav-text">比较数组、vector对象和array对象</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">jackcywang</p><div class="site-description" itemprop="description">不经一番彻骨寒,怎得梅花扑鼻香</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">66</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">65</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jackcywang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jackcywang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_42631693" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_42631693" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i> CSDN</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/hao-han-zhong-de-yipian-xie" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;hao-han-zhong-de-yipian-xie" rel="noopener" target="_blank"><i class="fa fa-fw fa-知乎"></i> 知乎</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">jackcywang</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">261k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">3:57</span></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),n=o.getMonth()+1,a=o.getDate(),r=o.getHours(),s=o.getMinutes(),g=o.getSeconds(),l=Date.UTC(2020,1,1,15,0,0),m=Date.UTC(i,n,a,r,s,g)-l,M=Math.floor(m/t),T=Math.floor((m-M*t)/e),u=Math.floor((m-M*t-T*e)/6e4),f=Math.floor((m-M*t-T*e-6e4*u)/1e3);document.getElementById("sitetime").innerHTML=" 在此已等候"+M+" 天 "+T+" 小时 "+u+" 分钟 "+f+" 秒"}siteTime()</script><div> <a href="http://www.miitbeian.gov.cn/" rel="noopener" target="_blank">陕ICP备19023518号-1</a> <span class="post-meta-divider">|</span> <span style="padding-left:25px;background:url(/images/beian.png) no-repeat left center" rel="nofollow"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61019002001038" rel="noopener" target="_blank">陕公网安备61019002001038号</a></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><script async src="/js/cursor/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script><script>
    function timer() {
      var ages = moment.preciseDiff(moment(),moment(20191220,"YYYYMMDD"));
      //去除时分秒信息
      ages = ages.replace(/\s?\d{0,2}\s+hours?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+minutes?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+seconds?/, "");
      //将年月日转换为中文
      ages = ages.replace(/years?/, "年");
      ages = ages.replace(/months?/, "月");
      ages = ages.replace(/days?/, "天");
      ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
      span.innerHTML = `footer.age ${ages}`;
    }
    var span = document.createElement("span");
    //插入到agesicon之后
    var agesicon = document.querySelector(".footer-ages-icon");
    document.querySelector(".copyright").insertBefore(span, agesicon.nextSibling);
    timer();
  </script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '500094376d9d18a3ed06',
      clientSecret: '71db1de3f4d19d73479a0ad6887d90081e8b7ca1',
      repo        : 'MyGitalk',
      owner       : 'jackcywang',
      admin       : ['jackcywang'],
      id          : '39d405518b28435efbc0c04408532b0e',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qHl8YMnB0b5OHNGx0AO0fjIE-gzGzoHsz',
      appKey     : 'wN3c6hhMnkEwVWOSLF0xQ3In',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><script src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><script src="https://player.lmih.cn/player/js/player.js" id="myhk" key="158704924834" m="1"></script></body></html>