<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"wangng.com",root:"/",scheme:"Pisces",version:"7.7.2",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="论文:Cascade R-CNN: Delving into High Quality Object Detection期刊:CVPR2018代码:Detectron-Cascade-RCNN 背景介绍　　在我们前面介绍的二阶段网络中,如RCNN系列，我们在定义正负类的时候会根据proposal与Ground truth的IOU来判断这个proposal是属于正类还是负类,这个IOU阈值通常设定在"><meta property="og:type" content="article"><meta property="og:title" content="目标检测之Cascade-RCNN解读"><meta property="og:url" content="https://wangng.com/articles/334625bf.html/index.html"><meta property="og:site_name" content="jackcywang&#39;s blog"><meta property="og:description" content="论文:Cascade R-CNN: Delving into High Quality Object Detection期刊:CVPR2018代码:Detectron-Cascade-RCNN 背景介绍　　在我们前面介绍的二阶段网络中,如RCNN系列，我们在定义正负类的时候会根据proposal与Ground truth的IOU来判断这个proposal是属于正类还是负类,这个IOU阈值通常设定在"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig1.png"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig3.png"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig4.png"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig5.png"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig6.png"><meta property="og:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig7.png"><meta property="article:published_time" content="2019-12-16T08:45:27.000Z"><meta property="article:modified_time" content="2020-06-24T08:12:57.791Z"><meta property="article:author" content="jackcywang"><meta property="article:tag" content="Object Detection"><meta property="article:tag" content="Cascade RCNN"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.wangng.com/deeplearning/objectdetection/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B9%8BCascade-RCNN%E8%A7%A3%E8%AF%BB/fig1.png"><link rel="canonical" href="https://wangng.com/articles/334625bf.html/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>目标检测之Cascade-RCNN解读 | jackcywang's blog</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8ce866754ae6c95a7238894d36ad3ab0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div> <a href="https://github.com/jackcywang" target="_blank" rel="noopener" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64ceaa;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">jackcywang's blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">梦想与现实只在一念之间</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li></ul></nav></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wangng.com/articles/334625bf.html/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="jackcywang"><meta itemprop="description" content="不经一番彻骨寒,怎得梅花扑鼻香"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="jackcywang's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 目标检测之Cascade-RCNN解读</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-16 16:45:27" itemprop="dateCreated datePublished" datetime="2019-12-16T16:45:27+08:00">2019-12-16</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Deeplearning/" itemprop="url" rel="index"><span itemprop="name">Deeplearning</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Deeplearning/Object-Detection/" itemprop="url" rel="index"><span itemprop="name">Object Detection</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/articles/334625bf.html/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/articles/334625bf.html/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>2.6k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>论文:<a href="https://arxiv.org/pdf/1712.00726.pdf" target="_blank" rel="noopener">Cascade R-CNN: Delving into High Quality Object Detection</a><br>期刊:CVPR2018<br>代码:<a href="https://github.com/zhaoweicai/Detectron-Cascade-RCNN" target="_blank" rel="noopener">Detectron-Cascade-RCNN</a></p><h3 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h3><p>　　在我们前面介绍的二阶段网络中,如RCNN系列，我们在定义正负类的时候会根据proposal与Ground truth的<a href="https://www.wangng.com/articles/13a21032.html/" target="_blank" rel="noopener">IOU</a>来判断这个proposal是属于正类还是负类,这个IOU阈值通常设定在0.5,也就是proposal与GT的IOU大于0.5的我们把他当成正例,小于的当成负例,然后对这些propsal进行正负样本采样,最后进行类别分类和box回归。</p><a id="more"></a><p>　　Cascade-RCNN文章指出以0.5作为阈值,会产生很多噪声检测,然而如果提高阈值,一方面可以提高proposal质量(iou值越高,proposal与GT越吻合),但另一方面,正负样本差距会进一步拉大(如RCNN中每个batch是128个proposal,其中包含32个正样本,如果iou值提高过大,正样本会很少,对目标检测来说,正样本少会意味着过拟合风险),检测性能会下降。以下图为例:<br><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig1.png" alt></p><p>　　阈值u=0.5的时候,有些框只包含物体很少一部分,有些框包含了多个目标,这些对检测器来说可能都是噪声,会影响检测性能。如果阈值u提高到0.7,可以看到,检测框的质量极大提高,那些噪声框会极大减少,实际对detector来说,它们需要的这些质量高的框来训练。</p><p>　　另外论文中作者提到过mismatch问题,我们以图(c)来讲解下这个问题,作者先是分别使用0.5,0.6,0.7的阈值训练了三个目标检测器,为了衡量每个检测器的性能,作者重新输入经过不同iou阈值的proposal,对这些proposal进行检测,最后输出回归后的检测框与GT的iou值。可以发现,iou为0.5-0.6的proposal,以0.5作为阈值训练的检测器效果是最好的。iou为0.6~0.75的proposal,阈值0.6的检测器效果更好,iou为0.7以上的阈值是0.7的检测器效果更好。也就是,以那个阈值训练的检测器,相应的应当输入以该阈值判断的proposal。</p><p>　　然而我们知道，检测器再inference阶段,是没有GT值的,没法根据iou来选择proposal,有的proposal甚至远远低于训练时的iou值,这就会造成mismatch问题。iou阈值越高,测试时mismatch问题越严重</p><p>　　图(d)时衡量三个检测器的分类效果,我们可以看到0.5的时候反而分类效果时最好的.阈值高了分类效果反而变差了,这其实不难想到,iou阈值低,正样本数据多,分类器看到的数据也就多了,iou低了,正样本少了,自然会有过拟合问题。</p><p>　　论文作者的目的是想在训练时获得高质量的proposal,但是单纯提高iou阈值虽然可以获得高质量的proposal,但是也会带来mismatch和正样本数据减少的问题。作者针对这一问题,提出了CasCade-RCNN的结构,使用三个不同的阈值同时训练三个detector,前面的detecotor为后面的detector提供更为精确的proposal,使得后面的分类得以使用高质量的proposal进行训练。</p><h3 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h3><p><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig3.png" alt></p><p>　　既然单一的iou阈值无法取得质量较好的proposal,那可不可以使用多个iou阈值呢?下面研究者给出了答案,这里有四个网络结构,分别是Faster R-CNN,Iterative BBox,Integral Loss还有最后的Cascade-RCNN,后面三个其实是对Faster RCNN的改进。</p><h3 id="Iterative-BBox"><a href="#Iterative-BBox" class="headerlink" title="Iterative BBox"></a>Iterative BBox</h3><p>　　这个模型其实和Cascade-RCNN的结构很相似,只不过Iterative BBox使用了三个相同的network head,阈值设定都是0.5,统一使用0.5并不能有有效改善后面框的质量,而且前面的实验也可以看到,一个训练好的detector,输出框的iou会高于输入的iou,也就是detector会改变输入的分布,后面再使用0.5的阈值,可能还会造成mismatch问题。</p><h3 id="Integral-Loss"><a href="#Integral-Loss" class="headerlink" title="Integral Loss"></a>Integral Loss</h3><p>　　这个模型是共享network head前面的所有层，包括特征提取层和ROI pooling层,将RPN网络提取的ROI分别送到三个不同阈值的network head层去训练,在inference的时候会将三个head层的结果进行ensemble。这个网络虽然使用了三个不同阈值的head结构,但是没解决mismactch和正样本减少问题,在inference的时候会,高阈值的head层还是需要处理更多的低iou的proposal,mismatch问题很严重,而且阈值高的head层,proposal数量少,会有过拟合问题</p><h3 id="Cascade-RCNN"><a href="#Cascade-RCNN" class="headerlink" title="Cascade-RCNN"></a>Cascade-RCNN</h3><p>　　结合了Iterative BBox和Integral Loss结构设计,通过三个不同阈值的head层级联的形式,来解决mismatch问题和正样本减少的问题。<br><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig4.png" alt><br>这里我们将每个head结构称为一个stage,第一个stage的时候,正负样本都很多,样本分布较均衡,而后面的stage,随着iou的提高,样本分布开始变化,样本更加靠近GT分布,离群点也会也来越多。因此可以看到每个阶段cascade都有不同的IoU阈值，这样可以更好地消除离群点，适应新的proposal分布。</p><p><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig5.png" alt><br>这里我们可以看到Cascade-RCNN每个stage的样本数量是足够的,不会容易造成过拟合的风险.</p><h3 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h3><p><strong>1.与Iterative BBox和Integral Loss比较</strong><br><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig6.png" alt></p><p><strong>使用Cascade结构效果</strong><br><img src="http://cdn.wangng.com/deeplearning/objectdetection/目标检测之Cascade-RCNN解读/fig7.png" alt><br>我们可以看到加和不加Cascade结构的效果还是很明显的,加上Cascade结构基本能提升2~4个点,说明这个结构还是挺有用的</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>　　以往的网络模型会使用单一的iou阈值来选择正负样本,单一的iou阈值选择是一个棘手的问题,阈值低了,会由大量噪声框的存在,阈值高了会有正负样本差距拉大和mismatch等问题。作者提出的Cascade R-CNN使用cascade回归作为一种重采样的机制，逐stage提高proposal的IoU值，从而使得前一个stage重新采样过的proposals能够适应下一个有更高阈值的stage。这个方法既能保证训练proposal的质量问题,还能解决高阈值下正样本数量减少的问题,对于二阶段网络来说,提升效果较明显。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> jackcywang</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://wangng.com/articles/334625bf.html/" title="目标检测之Cascade-RCNN解读">https://wangng.com/articles/334625bf.html/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Object-Detection/" rel="tag"><i class="fa fa-tag"></i> Object Detection</a><a href="/tags/Cascade-RCNN/" rel="tag"><i class="fa fa-tag"></i> Cascade RCNN</a></div><div class="post-nav"><div class="post-nav-item"><a href="/articles/d1d853bc.html/" rel="prev" title="分类网络之EfficientNet解读"><i class="fa fa-chevron-left"></i> 分类网络之EfficientNet解读</a></div><div class="post-nav-item"> <a href="/articles/986e60da.html/" rel="next" title="05数组：为什么很多编程语言中数组都从0开始编号？">05数组：为什么很多编程语言中数组都从0开始编号？<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="tabs tabs-comment"><ul class="nav-tabs"><li class="tab"><a href="#comment-gitalk">gitalk</a></li><li class="tab"><a href="#comment-valine">valine</a></li></ul><div class="tab-content"><div class="tab-pane gitalk" id="comment-gitalk"><div class="comments" id="gitalk-container"></div></div><div class="tab-pane valine" id="comment-valine"><div class="comments" id="valine-comments"></div></div></div></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#背景介绍"><span class="nav-number">1.</span> <span class="nav-text">背景介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络结构"><span class="nav-number">2.</span> <span class="nav-text">网络结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterative-BBox"><span class="nav-number">3.</span> <span class="nav-text">Iterative BBox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Integral-Loss"><span class="nav-number">4.</span> <span class="nav-text">Integral Loss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cascade-RCNN"><span class="nav-number">5.</span> <span class="nav-text">Cascade-RCNN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实验结果"><span class="nav-number">6.</span> <span class="nav-text">实验结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">7.</span> <span class="nav-text">总结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">jackcywang</p><div class="site-description" itemprop="description">不经一番彻骨寒,怎得梅花扑鼻香</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">66</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">66</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jackcywang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jackcywang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_42631693" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_42631693" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i> CSDN</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/hao-han-zhong-de-yipian-xie" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;hao-han-zhong-de-yipian-xie" rel="noopener" target="_blank"><i class="fa fa-fw fa-知乎"></i> 知乎</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">jackcywang</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">263k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">3:59</span></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),n=o.getMonth()+1,a=o.getDate(),r=o.getHours(),s=o.getMinutes(),g=o.getSeconds(),l=Date.UTC(2020,1,1,15,0,0),m=Date.UTC(i,n,a,r,s,g)-l,M=Math.floor(m/t),T=Math.floor((m-M*t)/e),u=Math.floor((m-M*t-T*e)/6e4),f=Math.floor((m-M*t-T*e-6e4*u)/1e3);document.getElementById("sitetime").innerHTML=" 在此已等候"+M+" 天 "+T+" 小时 "+u+" 分钟 "+f+" 秒"}siteTime()</script><div> <a href="http://www.miitbeian.gov.cn/" rel="noopener" target="_blank">陕ICP备19023518号-1</a> <span class="post-meta-divider">|</span> <span style="padding-left:25px;background:url(/images/beian.png) no-repeat left center" rel="nofollow"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61019002001038" rel="noopener" target="_blank">陕公网安备61019002001038号</a></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><script async src="/js/cursor/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script><script>
    function timer() {
      var ages = moment.preciseDiff(moment(),moment(20191220,"YYYYMMDD"));
      //去除时分秒信息
      ages = ages.replace(/\s?\d{0,2}\s+hours?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+minutes?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+seconds?/, "");
      //将年月日转换为中文
      ages = ages.replace(/years?/, "年");
      ages = ages.replace(/months?/, "月");
      ages = ages.replace(/days?/, "天");
      ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
      span.innerHTML = `footer.age ${ages}`;
    }
    var span = document.createElement("span");
    //插入到agesicon之后
    var agesicon = document.querySelector(".footer-ages-icon");
    document.querySelector(".copyright").insertBefore(span, agesicon.nextSibling);
    timer();
  </script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '500094376d9d18a3ed06',
      clientSecret: '71db1de3f4d19d73479a0ad6887d90081e8b7ca1',
      repo        : 'MyGitalk',
      owner       : 'jackcywang',
      admin       : ['jackcywang'],
      id          : '82ca326c468feb5e2629cbc0ce61d5ad',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qHl8YMnB0b5OHNGx0AO0fjIE-gzGzoHsz',
      appKey     : 'wN3c6hhMnkEwVWOSLF0xQ3In',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><script src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><script src="https://player.lmih.cn/player/js/player.js" id="myhk" key="158704924834" m="1"></script></body></html>