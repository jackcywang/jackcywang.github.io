<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"wangng.com",root:"/",scheme:"Pisces",version:"7.7.2",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="指针、数组和指针运算指针和数组基本等价的原因在于指针算术(pointer arithmetic)和C++内部处理数组的方式。首先，我们来看一看算术。将整数变量加1后，其值将增加1;但将指针变量加1后，增加的量等于它指向的类型的字节数。将指向 double的指针加1后，如果系统对 double使用8个字节存储，则数值将增加8：将指向short的指针加1后，如果系统对 short使用2个字节存储，则指"><meta property="og:type" content="article"><meta property="og:title" content="C++之指针_2"><meta property="og:url" content="https://wangng.com/articles/f19b90ab.html/index.html"><meta property="og:site_name" content="jackcywang&#39;s blog"><meta property="og:description" content="指针、数组和指针运算指针和数组基本等价的原因在于指针算术(pointer arithmetic)和C++内部处理数组的方式。首先，我们来看一看算术。将整数变量加1后，其值将增加1;但将指针变量加1后，增加的量等于它指向的类型的字节数。将指向 double的指针加1后，如果系统对 double使用8个字节存储，则数值将增加8：将指向short的指针加1后，如果系统对 short使用2个字节存储，则指"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-07-05T05:49:52.000Z"><meta property="article:modified_time" content="2020-05-24T03:51:59.606Z"><meta property="article:author" content="jackcywang"><meta property="article:tag" content="C++"><meta property="article:tag" content="指针"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://wangng.com/articles/f19b90ab.html/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>C++之指针_2 | jackcywang's blog</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8ce866754ae6c95a7238894d36ad3ab0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div> <a href="https://github.com/jackcywang" target="_blank" rel="noopener" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64ceaa;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">jackcywang's blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">梦想与现实只在一念之间</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li></ul></nav></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wangng.com/articles/f19b90ab.html/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="jackcywang"><meta itemprop="description" content="不经一番彻骨寒,怎得梅花扑鼻香"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="jackcywang's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> C++之指针_2</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-07-05 13:49:52" itemprop="dateCreated datePublished" datetime="2019-07-05T13:49:52+08:00">2019-07-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/articles/f19b90ab.html/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/articles/f19b90ab.html/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>6.9k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="指针、数组和指针运算"><a href="#指针、数组和指针运算" class="headerlink" title="指针、数组和指针运算"></a>指针、数组和指针运算</h3><p>指针和数组基本等价的原因在于指针算术(pointer arithmetic)和C++内部处理数组的方式。首先，我们来看一看算术。将整数变量加1后，其值将增加1;但将指针变量加1后，增加的量等于它指向的类型的字节数。将指向 double的指针加1后，如果系统对 double使用8个字节存储，则数值将增加8：将指向short的指针加1后，如果系统对 short使用2个字节存储，则指针值将增加2。下面程序演示了这种令人吃惊的现象，它还说明了另一点：C++将数组名解释为地址。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// addpntrs.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">    <span class="keyword">double</span> wages[<span class="number">3</span>] = &#123;<span class="number">10000.0</span>, <span class="number">20000.0</span>, <span class="number">30000.0</span>&#125;;</span><br><span class="line">    short stacks[<span class="number">3</span>] = &#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">double</span>* pw = wages;</span><br><span class="line">    short* ps = &amp;stacks[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"pw = "</span> &lt;&lt; pw &lt;&lt;<span class="string">", *pw = "</span> &lt;&lt; *pw &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"add 1 to the pw pointer:\n"</span>;</span><br><span class="line">    pw = pw + <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"pw = "</span> &lt;&lt; pw &lt;&lt;<span class="string">", *pw = "</span> &lt;&lt; *pw &lt;&lt;<span class="string">"\n\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ps = "</span> &lt;&lt; ps &lt;&lt; <span class="string">", *ps = "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"add 1 to the ps pointer:\n"</span></span><br><span class="line">    ps = ps + <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"ps = "</span> &lt;&lt; ps &lt;&lt;<span class="string">", *ps = "</span> &lt;&lt; *pw &lt;&lt;<span class="string">"\n\n"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"access two elements with array notation\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"stacks[0]= "</span> &lt;&lt; stacks[<span class="number">0</span>] &lt;&lt; <span class="string">", stacks[1] = "</span> &lt;&lt; stacks[<span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"access two elements with pointer notation\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"*stacks= "</span> &lt;&lt; *stacks &lt;&lt; <span class="string">", stacks[1] = "</span> &lt;&lt; *(stacks+<span class="number">1</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序输出</span></span><br><span class="line">pw = <span class="number">0x28ccf0</span>,*pw = <span class="number">10000</span></span><br><span class="line">add <span class="number">1</span> to the pw pointer:</span><br><span class="line">pw = ox28ccf8,*pw = <span class="number">20000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ps = ox28ccea,*ps = <span class="number">3</span></span><br><span class="line">add <span class="number">1</span> to the ps pointer:</span><br><span class="line">ps = ox28ccec,*ps = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">access two elements with <span class="built_in">array</span> notation</span><br><span class="line">stacks[<span class="number">0</span>] = <span class="number">3</span>, stacks[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line">access two elements with pointer notation</span><br><span class="line">*stacks = <span class="number">3</span>, *(stacks+<span class="number">1</span>) = <span class="number">2</span></span><br></pre></td></tr></table></figure><p><strong>在多数情况下，C++将数组名解释为数组第1个元素的地址。因此，下面的语句将pw</strong>声名为指向double类型的指针，然后将它初始化为wages数组中的第1个元素的地址:<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> * pw = wages;</span><br></pre></td></tr></table></figure><br>和所有数组一样，wages也存在下面的等式：<br><code>wages = &amp;wages[0] = address of first element of array</code><p></p><p>接下来，程序查看pw和$<em>$pw的值，前者是地址，后者是存储在该地址中的值。由于pw指向第1个元素，因此$</em>$pw显示的值为第1个元素的值，即10000接着，程序将pw加1.正如前面指出的，这样数字地址值将增加8，这使得pw的值为第2个元素的地址。因此，$*$pw现在的值是20000即第2个元素的值参见图4.10，为使改图更为清晰，对其中的地址值做了调整）。</p><p></p><div align="center"><br>&lt;img src=<a href="http://cdn.wangng.com/C++/C++之指针_2/img1.png" target="_blank" rel="noopener">http://cdn.wangng.com/C++/C++之指针_2/img1.png</a></div><p></p><blockquote><p>&lt;/div&gt;<br>此后，程序对ps执行相同的操作。这一次由于ps指向的是 shor t类型，而short占用2个字节，因此指针加1时，其值将增加2.结果是，指针也指向数组中下一个元素</p></blockquote><p>从该程序的输出可知，$<em>$（stacks+1）和 stacks[1]是等价的。同样，$</em>$（stacks+2）和 stacks[2]也是等价的。通常，使用数组表示法时，C++都执行下面的转换:<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arrayname[i] 变成 *(arrayname+i)</span><br></pre></td></tr></table></figure><br>如果使用的是指针，而不是数组名，则C++也执行同样的转换：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pointername[i] 变成 *(pointername + i)</span><br></pre></td></tr></table></figure><br>因此，在很多情况下，可以相同的方式使用指针名和数组名。对于它们，可以使用数组方括号表示法，也可以使用解除引用运算符（*）。在多数表达式中，它们都表示地址。区别之一是，可以修改指针的值而数组名是常量<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pointername = pointername + <span class="number">1</span>;  <span class="comment">//有效</span></span><br><span class="line">arrayname = arrayname + <span class="number">1</span>;      <span class="comment">//不允许</span></span><br></pre></td></tr></table></figure><p></p><h3 id="指针小结"><a href="#指针小结" class="headerlink" title="指针小结"></a>指针小结</h3><h4 id="1-声名指针"><a href="#1-声名指针" class="headerlink" title="1.声名指针"></a>1.声名指针</h4><p>要声名指向特定类型的指针，使用方式如下<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typeName * pointername</span><br></pre></td></tr></table></figure><p></p><h4 id="2-给指针赋值"><a href="#2-给指针赋值" class="headerlink" title="2.给指针赋值"></a>2.给指针赋值</h4><p>应将内存地址赋给指针。可以对变量名应用&amp;运算符，来获得被命名的内存的地址，new运算符返回未命名的内存的地址。示例<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> * pn;</span><br><span class="line"><span class="keyword">double</span> * pa;</span><br><span class="line"><span class="keyword">char</span> * pc;</span><br><span class="line"><span class="keyword">double</span> bubble = <span class="number">3.2</span>;</span><br><span class="line">pn = &amp;bubble;</span><br><span class="line">pc = <span class="keyword">new</span> <span class="keyword">char</span>;</span><br><span class="line">pa = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">30</span>];</span><br></pre></td></tr></table></figure><p></p><h4 id="3-对指针解除应用"><a href="#3-对指针解除应用" class="headerlink" title="3.对指针解除应用"></a>3.对指针解除应用</h4><p>对指针解除引用意味着获得指针指向的值。对指针应用解除引用或间接值运算符（$<em>$）来解除引用。因比，如果像上面的例子中那样，p是指向 bubble的指针，则$</em>$pn是指向的值，即3.2。示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; *pn;   <span class="comment">//答应bubble的值</span></span><br><span class="line">*ps = <span class="string">'S'</span>;     <span class="comment">//将字符'S'存放到指针ps所指向的内存地址中。</span></span><br></pre></td></tr></table></figure><br>另一种对指针解除引用的方法是使用数组表示法，例如，pn[0]与*pn是一样的。绝不要对未被初始化为合适地址的指针解除引用。<p></p><h4 id="4-区分指针和指针所指向的值"><a href="#4-区分指针和指针所指向的值" class="headerlink" title="4.区分指针和指针所指向的值**"></a>4.区分指针和指针所指向的值**</h4><p>如果pt是指向int类型的指针，<strong>那*pt不是指向int类型的指针，而是完全等同于一个int类型的变量，pt才是指针</strong>。示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * pt = <span class="keyword">new</span> <span class="keyword">int</span>;  <span class="comment">// 分配一个地址给指针pt</span></span><br><span class="line">*pt = <span class="number">5</span>;             <span class="comment">//将5存放到那个地址中</span></span><br></pre></td></tr></table></figure><p></p><h4 id="5-数组名"><a href="#5-数组名" class="headerlink" title="5.数组名"></a>5.数组名</h4><p><strong>在多数情况下，C++将数组名视为数组的第一个元素的地址。</strong>示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> tacos[<span class="number">10</span>];    <span class="comment">//tacos便是的含义等同于&amp;tacos[0]</span></span><br></pre></td></tr></table></figure><br>种例外情况是，将 sizeof运算符用于数组名用时，此时将返回整个数组的长度（单位为字节）<p></p><h4 id="6-指针算术"><a href="#6-指针算术" class="headerlink" title="6.指针算术"></a>6.指针算术</h4><p>C++允许将指针和整数相加。加1的结果等于原来的地址值加上指向的对象占用的总字节数。还可以将一个指针减去另一个指针，获得两个指针的差。后一种运算将得到一个整数，仅当两个指针指向同一个数组（也可以指向超出结尾的一个位置）时，这种运算才有意义；这将得到两个元素的间隔。示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> tacos[<span class="number">5</span>] = &#123;<span class="number">5</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> *pt = tacos;   <span class="comment">//假设pt和tacos有相同的地址3000</span></span><br><span class="line">pt = pt + <span class="number">1</span>;       <span class="comment">//pt是3004(int占4个字节)</span></span><br><span class="line"><span class="keyword">int</span> *pe = &amp;tacos[<span class="number">3</span>] <span class="comment">//pe现在是3012(int占4个字节)</span></span><br><span class="line">pe = pe - <span class="number">1</span>;       <span class="comment">//pe等于3008,也是tacos[2]的地址</span></span><br><span class="line"><span class="keyword">int</span> diff = pe - pt  <span class="comment">//diiff是1，</span></span><br></pre></td></tr></table></figure><p></p><h4 id="7-数组的动态联编和静态联编"><a href="#7-数组的动态联编和静态联编" class="headerlink" title="7.数组的动态联编和静态联编"></a>7.数组的动态联编和静态联编</h4><p>使用数组声明来创建数组时，将采用静态联编，即数组的长度在编译时设置：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> tacos[<span class="number">10</span>];  <span class="comment">//静态联编，在编译时数组大小是固定的</span></span><br></pre></td></tr></table></figure><br>使用new[]运算符创建数组时，将采用动态联编（动态数组），即将在<strong>运行时为数组分配空间，其长度也将在运行时设置</strong>。使用完这种数组后，应使用 delete[]释放其占用的内存：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">size</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; <span class="built_in">size</span>;</span><br><span class="line"><span class="keyword">int</span> * pt = <span class="keyword">new</span> <span class="keyword">int</span> [<span class="built_in">size</span>]; <span class="comment">//动态联编，大小在运行时设定;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">delete</span> [] pt;      <span class="comment">//运行结束后释放内存</span></span><br></pre></td></tr></table></figure><p></p><h4 id="数组表示法和指针表示法"><a href="#数组表示法和指针表示法" class="headerlink" title="数组表示法和指针表示法"></a>数组表示法和指针表示法</h4><p>使用方括号数组表示法等同于对指针解除引用：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tacos[<span class="number">0</span>] 等同于*tacos,tacos地址所在的值</span><br><span class="line">tacos[<span class="number">3</span>] 等同于*(tacos+<span class="number">3</span>),tacos[<span class="number">3</span>]地址所在的值</span><br></pre></td></tr></table></figure><br>数组名和指针变量都是如此，因此对于指针和数组名，既可以使用指针表示法，也可以使用数组表示法。示例：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * pt = <span class="keyword">new</span> <span class="keyword">int</span> [<span class="number">10</span>];  <span class="comment">//pt指向大小为10的数组</span></span><br><span class="line">*pt = <span class="number">5</span>;         <span class="comment">//将位置0的值设置为5</span></span><br><span class="line">pt[<span class="number">0</span>] = <span class="number">6</span>;       <span class="comment">//将位置0值重置为6  </span></span><br><span class="line">pt[<span class="number">9</span>] = <span class="number">44</span>;      <span class="comment">//将位置9(第10个元素)置为44</span></span><br><span class="line"><span class="keyword">int</span> coats[<span class="number">10</span>];</span><br><span class="line">*(coats+<span class="number">4</span>) = <span class="number">12</span>;  <span class="comment">//将coats[4]置为12</span></span><br></pre></td></tr></table></figure><p></p><h3 id="指针和字符串"><a href="#指针和字符串" class="headerlink" title="指针和字符串"></a>指针和字符串</h3><p>数组和指针的特殊关系可以扩展到C风格字符串。请看下面的代码：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> flower[<span class="number">10</span>] = <span class="string">"rose"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; flower &lt;&lt; <span class="string">"s are red\n"</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; flower[<span class="number">0</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="comment">//输出结果是；</span></span><br><span class="line">roses are red</span><br><span class="line">r</span><br></pre></td></tr></table></figure><br><strong>数组名是第一个元素的地址，因此cout语句中的 flower是包含字符r的char元素的地址。cout对象认为char的地址是字符串的地址，因此它打印该地址处的字符，然后继续打印后面的字符，直到遇到空字符0）为止</strong>。总之，<u>如果给cout提供一个字符的地址，则它将从该字符开始打印，直到遇到空字符为止。</u><p></p><p>前面的cout语句中最后一部分的情况如何呢？如果 flower是字符串第一个字符的地址，则表达式“<br>s are red\n”是什么呢？为了与cout对字符串输出的处理保持一致，这个用引号括起的字符串也应当是一个地址。</p><p><strong>在C++中，用引号括起的字符串像数组名一样，也是第一个元素的地址</strong>。上述代码不会将整个字符串发送给cout，而只是发送该字符串的地址。这意味着对于数组中的字符串、用引号括起的字符串常量以及指针所描述的字符串，处理的方式是一样的，都将传递它们的地址。</p><blockquote><p>注意：在cout和多数C+表达式中，char数组名、char指针以及用引号括起的字符串常量都被解释为符串第一个字符的地址。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ptrstr.cpp 使用string型的指针</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;   //声明strlen(),strcpy()</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line">  <span class="keyword">char</span> animal[<span class="number">20</span>] = <span class="string">"bear"</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> * bird = <span class="string">"wren"</span>;  <span class="comment">//bird 指向string的地址</span></span><br><span class="line">  <span class="keyword">char</span> * ps;                   <span class="comment">//未初始化</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; animal &lt;&lt; <span class="string">" and "</span>;   </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; bird &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//cout &lt;&lt; ps //不能这样做</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"enter a kind of animal: "</span>;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; animal;</span><br><span class="line">  ps = animal;         <span class="comment">//ps指向animal;</span></span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; ps &lt;&lt; <span class="string">"!\n"</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"Before using strcpy():\n"</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; animal &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*)animal &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; ps &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*)(ps) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">  ps = <span class="keyword">new</span> <span class="keyword">char</span> [<span class="built_in">strlen</span>(animal) + <span class="number">1</span>];</span><br><span class="line">  <span class="built_in">strcpy</span>(ps,animal);</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"After using strcpy():\n"</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; animal &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*) animal &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; ps &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*) ps &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">delete</span> [] ps;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//程序输出</span></span><br><span class="line">bear <span class="keyword">and</span> wren</span><br><span class="line">enter a kind of animal: monkey</span><br><span class="line">monkey!</span><br><span class="line"><span class="function">Before <span class="keyword">using</span> <span class="title">strcpy</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">monkey at 0x61fef8</span></span><br><span class="line"><span class="function">monkey at 0x61fef8</span></span><br><span class="line"><span class="function">After <span class="keyword">using</span> <span class="title">strcpy</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">monkey at 0x61fef8</span></span><br><span class="line"><span class="function">monkey at 0xfa1358</span></span><br></pre></td></tr></table></figure><p>记住，“wren”实际表示的是字符串的地址，因此这条语句将“wren”的地址赋给了bird指针。（一般来说，编译器在内存留出一些空间，以存储程序源代码中所有用引号括起的字符串，并将每个被存储的字符串与其地址关联起来。）这意味着可以像使用字符串“wen”那样使用指针bird，如下面的示例所示：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"A concerned "</span> &lt;&lt; bird &lt;&lt; <span class="string">" speaks\n"</span></span><br></pre></td></tr></table></figure><br>字符串字面值是常量，这就是为什么代码在声明中使用关键字 const的原因。以这种方式使用 const意味着可以用bird来访问字符串，但不能修改它。最后，指针ps未被初始化因此不指向任何字符串。打印它可能报错。<p></p><p>试图将信息读入ps指向的位置将更糟。由于ps没有被初始化，因此并不知道信息将被存储在哪里，这甚至可能改写内存中的信息。要避免这种问题很容易只要使用足够大的char数组来接收输入即可。请不要使用字符串常量或未被初始化的指针来接收输入。为避免这些问题，也可以使用 std:string对象，而不是数组。</p><blockquote><p>警告：在将字符串读入程序时，应使用已分配的内存地址。该地址可以是数组名，也可以是使用切始化过的指针。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ps = animal;</span><br><span class="line">...</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; animal &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*)animal &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ps &lt;&lt; <span class="string">" at "</span> &lt;&lt; (<span class="keyword">int</span>*)(ps) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure><p>一般来说，如果给cout提供一个指针，它将打印地址。但如果指针的类型为char$<em>$，则cout将显示指向的字符串。如果要显示的是字符串的地址，则必须将这种指针强制转换为另一种指针类型，如int</em>（上面的代码就是这样做的）。因此，ps显示为字符串“fox”，而（int$<em>$）ps显示为该字符串的地址。<em>*注意，将animal赋给ps并不会复制字符串，而只是复制地址。这样，这两个指针将指向相同的内存单元和字符串。</em></em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps = <span class="keyword">new</span> <span class="keyword">char</span> [<span class="built_in">strlen</span>(animal)+<span class="number">1</span>];</span><br><span class="line"><span class="built_in">strcpy</span>(ps,animal);    <span class="comment">//赋值字符串到新的地址</span></span><br></pre></td></tr></table></figure><p>strcpy()函数接收两个参数，第一个是目标地址，第二个是要复制的字符串的地址。除p（函数接受2个参数，第一个是目标地址。分配空间，需要有足够的空间来存储副本。在这里，我们用 strlen（）来确定所需的空间，并使用new获得可用的内存。</p><h4 id="字符串复制给数组"><a href="#字符串复制给数组" class="headerlink" title="字符串复制给数组"></a>字符串复制给数组</h4><p>我们经常需要将字符串放到数组中。<strong>初始化数组时，使用=运算符，其他时候使用strcpy()或 strncpy().</strong>示例：<br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> food[<span class="number">20</span>] = <span class="string">"carrots"</span>;   <span class="comment">//初始化</span></span><br><span class="line"><span class="built_in">strcpy</span>(food,<span class="string">"flan"</span>);         <span class="comment">//其他时候</span></span><br></pre></td></tr></table></figure><br>但是类似下面这样的代码可能导致问题，因为food数组比字符串小：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">strcpy</span>（food, <span class="string">"a picnic basket filled with many goodies"</span>）;</span><br></pre></td></tr></table></figure><br>在这种情况下，函数将字符串中剩余的部分复制到数组后面的内存字节中，这可能会覆盖程序正在使用的其他内存。要避兔这种问题，可使用strncpy()。该函数还接受第3个参数—要复制的最大字符数.<strong>要注意的是，如果该函数在到达字符串结尾之前，目标内存已经用完，则它将不会添加空字符</strong>。因此，应该这样使用该函数：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">strncpy</span> （food, <span class="string">"a picnic basket filled with many goodies"</span>,<span class="number">19</span>）;</span><br><span class="line">food[<span class="number">19</span>]=<span class="string">'\0'</span>;</span><br></pre></td></tr></table></figure><br>这样最多将19个字符复制到数组中，然后将最后一个元素设置成空字符。如果该字符串少于19个字符，则 strncpy()将在复制完该字符串之后加上空字符，以标记该字符串的结尾。<p></p><p><strong>强调：应使用strcpy()或strncpy()，而不是赋值运算符来将字符串赋给数组。</strong></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> jackcywang</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://wangng.com/articles/f19b90ab.html/" title="C++之指针_2">https://wangng.com/articles/f19b90ab.html/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a><a href="/tags/%E6%8C%87%E9%92%88/" rel="tag"><i class="fa fa-tag"></i> 指针</a></div><div class="post-nav"><div class="post-nav-item"><a href="/articles/6181e072.html/" rel="prev" title="C++之结构"><i class="fa fa-chevron-left"></i> C++之结构</a></div><div class="post-nav-item"> <a href="/articles/6892c111.html/" rel="next" title="C++之指针_1">C++之指针_1<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="tabs tabs-comment"><ul class="nav-tabs"><li class="tab"><a href="#comment-gitalk">gitalk</a></li><li class="tab"><a href="#comment-valine">valine</a></li></ul><div class="tab-content"><div class="tab-pane gitalk" id="comment-gitalk"><div class="comments" id="gitalk-container"></div></div><div class="tab-pane valine" id="comment-valine"><div class="comments" id="valine-comments"></div></div></div></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#指针、数组和指针运算"><span class="nav-number">1.</span> <span class="nav-text">指针、数组和指针运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指针小结"><span class="nav-number">2.</span> <span class="nav-text">指针小结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-声名指针"><span class="nav-number">2.1.</span> <span class="nav-text">1.声名指针</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-给指针赋值"><span class="nav-number">2.2.</span> <span class="nav-text">2.给指针赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-对指针解除应用"><span class="nav-number">2.3.</span> <span class="nav-text">3.对指针解除应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-区分指针和指针所指向的值"><span class="nav-number">2.4.</span> <span class="nav-text">4.区分指针和指针所指向的值**</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-数组名"><span class="nav-number">2.5.</span> <span class="nav-text">5.数组名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-指针算术"><span class="nav-number">2.6.</span> <span class="nav-text">6.指针算术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-数组的动态联编和静态联编"><span class="nav-number">2.7.</span> <span class="nav-text">7.数组的动态联编和静态联编</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组表示法和指针表示法"><span class="nav-number">2.8.</span> <span class="nav-text">数组表示法和指针表示法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指针和字符串"><span class="nav-number">3.</span> <span class="nav-text">指针和字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串复制给数组"><span class="nav-number">3.1.</span> <span class="nav-text">字符串复制给数组</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">jackcywang</p><div class="site-description" itemprop="description">不经一番彻骨寒,怎得梅花扑鼻香</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">66</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">65</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jackcywang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jackcywang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/weixin_42631693" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_42631693" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i> CSDN</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/hao-han-zhong-de-yipian-xie" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;hao-han-zhong-de-yipian-xie" rel="noopener" target="_blank"><i class="fa fa-fw fa-知乎"></i> 知乎</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">jackcywang</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">261k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">3:57</span></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=36e5,t=24*e,o=new Date,i=o.getFullYear(),n=o.getMonth()+1,a=o.getDate(),r=o.getHours(),s=o.getMinutes(),g=o.getSeconds(),l=Date.UTC(2020,1,1,15,0,0),m=Date.UTC(i,n,a,r,s,g)-l,M=Math.floor(m/t),T=Math.floor((m-M*t)/e),u=Math.floor((m-M*t-T*e)/6e4),f=Math.floor((m-M*t-T*e-6e4*u)/1e3);document.getElementById("sitetime").innerHTML=" 在此已等候"+M+" 天 "+T+" 小时 "+u+" 分钟 "+f+" 秒"}siteTime()</script><div> <a href="http://www.miitbeian.gov.cn/" rel="noopener" target="_blank">陕ICP备19023518号-1</a> <span class="post-meta-divider">|</span> <span style="padding-left:25px;background:url(/images/beian.png) no-repeat left center" rel="nofollow"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61019002001038" rel="noopener" target="_blank">陕公网安备61019002001038号</a></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><script async src="/js/cursor/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script><script>
    function timer() {
      var ages = moment.preciseDiff(moment(),moment(20191220,"YYYYMMDD"));
      //去除时分秒信息
      ages = ages.replace(/\s?\d{0,2}\s+hours?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+minutes?/, "");
      ages = ages.replace(/\s?\d{0,2}\s+seconds?/, "");
      //将年月日转换为中文
      ages = ages.replace(/years?/, "年");
      ages = ages.replace(/months?/, "月");
      ages = ages.replace(/days?/, "天");
      ages = ages.replace(/\d+/g, '<span style="color:#1890ff">$&</span>');
      span.innerHTML = `footer.age ${ages}`;
    }
    var span = document.createElement("span");
    //插入到agesicon之后
    var agesicon = document.querySelector(".footer-ages-icon");
    document.querySelector(".copyright").insertBefore(span, agesicon.nextSibling);
    timer();
  </script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '500094376d9d18a3ed06',
      clientSecret: '71db1de3f4d19d73479a0ad6887d90081e8b7ca1',
      repo        : 'MyGitalk',
      owner       : 'jackcywang',
      admin       : ['jackcywang'],
      id          : '4eb3777a25edcec38cc4d085ab21fdc3',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qHl8YMnB0b5OHNGx0AO0fjIE-gzGzoHsz',
      appKey     : 'wN3c6hhMnkEwVWOSLF0xQ3In',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><script src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><script src="https://player.lmih.cn/player/js/player.js" id="myhk" key="158704924834" m="1"></script></body></html>